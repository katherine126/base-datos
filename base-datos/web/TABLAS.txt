CREATE TABLE CLIENTES (ID_CLIENTE INTEGER PRIMARY KEY, NOMBRE VARCHAR2(80), APELLIDO_PA VARCHAR(90), APELLIDO_MA VARCHAR(90),CORREO VARCHAR2(200), TELEFONO VARCHAR2(20));

INSERT INTO CLIENTES VALUES(1,'Carolina','Vazquez', 'Román','carito123@hotmail.com','5542768954');
INSERT INTO CLIENTES VALUES(2,'Ester','Perez', 'Diaz','ester_12@hotmail.com','5512345678');
INSERT INTO CLIENTES VALUES(3,'Maria','Martinez', 'Valenzuela','mar_mar@hotmail.com','5547829540');
INSERT INTO CLIENTES VALUES(4,'Karina','De la Cruz', 'Villena','kari_25@hotmail.com','5511090023');
INSERT INTO CLIENTES VALUES(5,'Ursula','Torres', 'Leyra','ursula_torres@hotmail.com','5500564871');

SELECT * FROM CLIENTES

CREATE TABLE VENDEDORES (ID_VENDEDOR INTEGER PRIMARY KEY, CUENTA VARCHAR2(8), NOMBRE VARCHAR2(80), APELLIDO_PA VARCHAR(90), APELLIDO_MA VARCHAR(90));

INSERT INTO VENDEDORES VALUES(1,'12347684','Katherine','Rafael','Chuquimango');
INSERT INTO VENDEDORES VALUES(2,'14562111','Analy','Ortega','Cerqueiras');
INSERT INTO VENDEDORES VALUES(3,'23412134','Monica','Carranza','Delgado');
INSERT INTO VENDEDORES VALUES(4,'90215671','Carmen','Garcia','Mancera');

SELECT * FROM VENDEDORES

CREATE TABLE CATEGORIA (ID_CATEGORIA INTEGER PRIMARY KEY, NOMBRE_CATEGORIA VARCHAR2(50), CANTIDAD INTEGER);

INSERT INTO CATEGORIA VALUES (1,'VESTIDOS', 100);
INSERT INTO CATEGORIA VALUES (2,'BLUSAS',90);
INSERT INTO CATEGORIA VALUES (3,'SUDADERAS',200);
INSERT INTO CATEGORIA VALUES (4,'JEANS',150);
INSERT INTO CATEGORIA VALUES (5,'SHORTS',50);

SELECT * FROM CATEGORIA

CREATE TABLE PRODUCTOS (ID_PRODUCTO INTEGER PRIMARY KEY, CODIGO_PRODUCTO VARCHAR2(8), ID_CATEGORIA INTEGER, NOMBRE_PRODUCTO VARCHAR2(100));

INSERT INTO PRODUCTOS VALUES(1,'13450021',2,'Blusa Coraline');
INSERT INTO PRODUCTOS VALUES(2,'32415643',1,'Vestido Floral Primavera');
INSERT INTO PRODUCTOS VALUES(3,'35109834',4,'Micky Mouse');
INSERT INTO PRODUCTOS VALUES(4,'10809421',5,'Jean Sexy Jeans');
INSERT INTO PRODUCTOS VALUES(5,'00814521',3,'Short Capri');

SELECT * FROM PRODUCTOS

CREATE TABLE DETALLE_VENTA (ID_VENTA INTEGER PRIMARY KEY, ID_PRODUCTO INTEGER, PRECIO FLOAT, CANTIDAD INTEGER);

INSERT INTO DETALLE_VENTA VALUES(1,5,350,2);
INSERT INTO DETALLE_VENTA VALUES(2,1,650,1);
INSERT INTO DETALLE_VENTA VALUES(3,4,400,3);
INSERT INTO DETALLE_VENTA VALUES(4,2,700,5);
INSERT INTO DETALLE_VENTA VALUES(5,3,450,4);

SELECT * FROM DETALLE_VENTA


CREATE TABLE USUARIO_1 (ID INTEGER, LOGIN VARCHAR2(80), PASSWORD VARCHAR2(80), CONSTRAINT U1_PK PRIMARY KEY(ID))



CREATE SEQUENCE USUARIO_SECUENCIA
INCREMENT BY 1
NOMAXVALUE;

CREATE OR REPLACE PROCEDURE CREAR_USUARIO (MY_ID OUT INTEGER, MY_LOGIN IN VARCHAR2, MY_PASSWORD IN VARCHAR2)
AS
BEGIN
FOR I IN (SELECT*FROM USUARIO_1) LOOP
IF MY_LOGIN = I.LOGIN THEN
RAISE_APPLICATION_ERROR (-20413,'El usuario ya existe.');
END IF;
END LOOP;
END;
/

SELECT USUARIO_SECUENCIA.NEXTVAL INTO MY_ID FROM DUAL;
INSERT INTO USUARIO_1 (ID, LOGIN, PASSWORD) VALUES (MY_ID, MY_LOGIN, MY_PASSWORD);
END;
/


DECLARE
ID INTEGER;
BEGIN
CREAR_USUARIO(ID,'katherine','kathy15heber');
END;
/


CREATE OR REPLACE PROCEDURE AUTENTICAR_USUARIO (VALOR OUT INTEGER, MYLOGIN IN VARCHAR2, MYPASSWORD IN VARCHAR2)
AS
BEGIN
VALOR:=0;

FOR I IN (SELECT*FROM USUARIO_1 WHERE LOGIN=MYLOGIN AND PASSWORD=MYPASSWORD) LOOP
IF MYLOGIN=I.LOGIN AND MYPASSWORD=I.PASSWORD THEN
VALOR:=1;
DBMS_OUTPUT.PUT_LINE(VALOR);
ELSE
VALOR:=0;
DBMS_OUTPUT.PUT_LINE(VALOR);
END IF;
END LOOP;
END;
/



CREATE TABLE USUARIO_XXX (ID INTEGER, EMAIL VARCHAR2(80), EDAD INTEGER)
CREATE TABLE USUARIO_MENOR (ID INTEGER, EMAILL VARCHAR2(80), EDAD INTEGER)

CREATE OR REPLACE TRIGGER DISPARADOR_USUARIOXXX AFTER INSERT ON USUARIO_XXX FOR EACH ROW
BEGIN
IF :NEW.EDAD>14 THEN
INSERT INTO USUARIO_MENOR VALUES (:NEW.ID, :NEW.EMAIL, :NEW.EDAD);
END IF;
END;
/


INSERT INTO USUARIO_XXX VALUES (1,'maria_23@hotmail.com', 17);
INSERT INTO USUARIO_XXX VALUES (2,'carolina_12@hotmail.com',20);

SELECT*FROM USUARIO_XXX
SELECT*FROM USUARIO_MENOR